{% extends 'base.html' %}

{% block title %}
    | Checkout
{% endblock %}

{% block content %}
    <h1>Checkout</h1>

    <div class="order-info">
        <h3>Your order</h3>
        <ul>
            {% for item in cart %}
                <li>
                    {{ item.quantity }} x {{ item.price }} <span>$ {{ item.total_price|floatformat:2 }}</span>
                </li>
            {% endfor %}
            {% if cart.coupon %}
                <li>
                    "{{ cart.coupon.code }}" ({{ cart.coupon.discount }}% off)
                    <span class="neg">- ${{ cart.get_discount|floatformat:2 }}</span>
                </li>
            {% endif %}
        </ul>
        <p>Total: ${{ cart.get_total_price_after_discount|floatformat:2 }}</p>
    </div>
    <div class="container">
    {# todo add custom forms in django, handle validation. #}
        <form action="" class="needs-validation" method="POST">
            {% csrf_token %}
            {{ form }}
{#            <div class="form-group mb-2">#}
{#                <label for="first_name">First Name</label>#}
{#                <input type="text" class="form-control form-control-lg" id="first_name" placeholder="First Name" required>#}
{#                <div class="valid-feedback">#}
{#                </div>#}
{#                <div class="invalid-feedback">#}
{#                    This field is required.#}
{#                </div>#}
{#            </div>#}
{#            <div class="form-group mb-2">#}
{#                <label for="last_name">Last Name</label>#}
{#                <input type="text" class="form-control form-control-lg" id="last_name" placeholder="Last Name" required>#}
{#                <div class="valid-feedback">#}
{#                </div>#}
{#                <div class="invalid-feedback">#}
{#                    This field is required.#}
{#                </div>#}
{#            </div>#}
{#            <div class="form-group mb-2">#}
{#                <label for="email">First Email</label>#}
{#                <input type="email" class="form-control form-control-lg" id="email" placeholder="Email" required>#}
{#                <small class="form-text text-muted ms-2">We will never share your email with others.</small>#}
{#                <div class="valid-feedback">#}
{#                </div>#}
{#                <div class="invalid-feedback">#}
{#                    This field is required.#}
{#                </div>#}
{#            </div>#}
{#            <div class="form-group mb-2">#}
{#                <label for="address">Mailing Address</label>#}
{#                <textarea#}
{#                        class="form-control form-control-lg"#}
{#                        id="address"#}
{#                        rows="5"#}
{#                        placeholder="Mailing Address"#}
{#                        required></textarea>#}
{#                <small class="form-text text-muted ms-2">This will be entered onto mail packaging.</small>#}
{#                <div class="valid-feedback">#}
{#                </div>#}
{#                <div class="invalid-feedback">#}
{#                    This field is required.#}
{#                </div>#}
{#            </div>#}
{#            <div class="form-group">#}
{#                <label for="postal_code">Postal Code</label>#}
{#                <input type="text" class="form-control form-control-lg" id="postal_code" placeholder="Postal Code" required>#}
{#                <div class="valid-feedback">#}
{#                </div>#}
{#                <div class="invalid-feedback">#}
{#                    This field is required.#}
{#                </div>#}
{#            </div>#}
            <p class="d-flex justify-content-between my-5">
                <a href="{% url 'cart:cart_detail' %}" class="btn btn-secondary">Back to Cart</a>
                <input type="submit" class="btn btn-primary" value="Place order">
            </p>
        </form>
    </div>
{% endblock %}
